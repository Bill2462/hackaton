<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Smart activity planner</title>
      <link rel="stylesheet" type="text/css" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />

      <script type='text/javascript' src='//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js'></script>
      <script type='text/javascript' src='http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js'></script>
</head>
<body>
<img src="https://cdn.discordapp.com/attachments/953275734309351424/954790858765533245/unknown.png" alt="" style="width: 100%;height: auto;">
<h2 style="font-family:Helvetica;">What do you want to do?</h2>

<form method="post">
      <label for="where">Where are you?</label>
      <br>
      <input type="text" name="where" value="{{ request.form['where'] }}" required>
      <br>
      <label for="request"> What do you want to do?</label>
      <br>
      <input type="text" name="request" value="{{ request.form['request'] }}" required>
      <br>
      <label for="preferences">Your preferences:</label>
      <br>
      <textarea name="preferences" rows="5" cols="50">{{ request.form['preferences'] }}</textarea>
      <br>
      <button type="submit"><img src="https://cdn.discordapp.com/attachments/953275734309351424/954788365155328031/unknown.png" border="0" /></button>
</form>

{% if err %}

<h3> {{ err }} </h3>

{% endif %}

{% if recommendations %}
<h3> Recommendations </h3>

Here are some recommendations for you based on your preferences: <br>

{% for recommendation in recommendations %}
<h4> {{ recommendation['title'] }} </h4>
{{ recommendation['description'] }} <br>
<p style="font-style: italic;">{{ recommendation['footnotes'] }} </p> <br>
{% endfor %}
{% endif %}

{% if preferences %}

<h3>Recognized preferences</h3>
I'm taking the following preferences into account:
<ul>
{% for preference in preferences %}
    <li>{{ preference }}</li>
{% endfor %}
</ul>

{% endif %}

{% if map %}

    <div id="map"></div>

    <script>
        var map = L.map('map').setView([{{lat}}, {{lon}}], 16);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'}).addTo(map);

        {{map|safe}}
    </script>

{% endif %}

<img src="https://cdn.discordapp.com/attachments/953275734309351424/954800315335585842/unknown.png" alt="" style="width: 100%;height: auto;">
    
</body>
</html>
